<!DOCTYPE html>
<!-- Jonas Feb 8, 2019 -->
<html>
<head>

</head>
<body>
<script>


//for different quizzes - why not create different tabs for different quizzes?

//method to add a row onto quiz maker table
function addQuestionRow(givenTable) {
  //put quiz maker table into a variable
  var table = document.getElementById(givenTable);
  //put last row index into a varibale
  var lastRowIndex = table.rows.length;

  //inserts a row onto the table
  var row = table.insertRow(lastRowIndex);

  //set to 3 because the table starts with 3 rows by default
  //var nextRowIndex = 3;


  //first cell represents the index for the question
  var indexCell = row.insertCell(0);
  indexCell.innerHTML = lastRowIndex - 1;
  indexCell.id = "i" + (lastRowIndex - 1);

  //second cell represents the question
  var questionCell = row.insertCell(1);
  questionCell.innerHTML = "<input type='text' name='Question'>";
  questionCell.id = ("q" + (lastRowIndex-1));

  //inserts relations cell
  var nodesCell = row.insertCell(2);
  nodesCell.innerHTML = "<input type='text' name='RelatedNodes'>";
  nodesCell.id = ("rn" + (lastRowIndex-1));

  //inserts answer cell, which will be another table
  var answerCell = row.insertCell(3);
  //create an input element which will be used as a button
  var elementHideShowButton = document.createElement('input');

  // Set the input attributes type and value for the button
  elementHideShowButton.setAttribute('type','button');
  elementHideShowButton.setAttribute('value','Hide/show answers');

  // ADD THE BUTTON's 'onclick' EVENT.
  elementHideShowButton.setAttribute('onclick', "hideORShow('hiddenPartQ" + (lastRowIndex - 1) + "')");

  //create div element (used for indexing the part that will be hidden whe -
  // - the show/hide button is pressed)
  var elementHiddenPart = document.createElement('div');
  elementHiddenPart.setAttribute('id',"hiddenPartQ" + (lastRowIndex - 1));

  //create answers table element
  var elementAnswersTable = document.createElement("table");

  //set unique id for the answersTable
  elementAnswersTable.setAttribute('id', 'answersTableQ' + (lastRowIndex - 1));

  //setting the attributes for the table
  elementAnswersTable.setAttribute('width' , '350px');
  elementAnswersTable.setAttribute('border', '1');

  // create addAnswer & deleteAnswer buttons!
  var elementAddAnswerButton = document.createElement("input");
  elementAddAnswerButton.setAttribute('type', 'button');
  elementAddAnswerButton.setAttribute('value', 'Add answer');
  elementAddAnswerButton.setAttribute('onclick', "addAnswerRow('answersTableQ" + (lastRowIndex - 1) + "', '" + (lastRowIndex - 1) + "')");

  var elementDeleteAnswerButton = document.createElement("input");
  elementDeleteAnswerButton.setAttribute('type', 'button');
  elementDeleteAnswerButton.setAttribute('value', 'Delete answer');
  elementDeleteAnswerButton.setAttribute('onclick', "deleteQuestionRow('answersTableQ" + (lastRowIndex - 1) + "')");


  //append the two buttons to the hiddenpart
  elementHiddenPart.appendChild(elementAddAnswerButton);
  elementHiddenPart.appendChild(elementDeleteAnswerButton);

  //append the table to the hiddenPart
  elementHiddenPart.appendChild(elementAnswersTable);


  //append the button to the cell
  answerCell.appendChild(elementHideShowButton);

  //append the hidden part as the child of the cell
  answerCell.appendChild(elementHiddenPart);

  addAnswerRow('answersTableQ' + (lastRowIndex -1));



  /* these code - not required for now.
  //then add four answer cells
  var ansCell1 = row.insertCell(2);
  ansCell1.innerHTML = "<input type='text' name='Answer1'>";
  ansCell1.id = ("ans" + (lastRowIndex-1) + "0");

  var ansCell2 = row.insertCell(3);
  ansCell2.innerHTML = "<input type='text' name='Answer2'>";
  ansCell2.id = ("ans" + (lastRowIndex-1) + "1");

  var ansCell3 = row.insertCell(4);
  ansCell3.innerHTML = "<input type='text' name='Answer3'>";
  ansCell3.id = ("ans" + (lastRowIndex-1) + "2");

  var ansCell4 = row.insertCell(5);
  ansCell4.innerHTML = "<input type='text' name='Answer4'>";
  ansCell4.id = ("ans" + (lastRowIndex-1) + "3");
  */
}

//method to add a row onto quiz maker table
function deleteQuestionRow(givenTable)
{
  //put quiz maker table into a variable
  var table = document.getElementById(givenTable);
  //put last row index into a varibale
  var lastRowIndex = table.rows.length;

  //delete a row from the table
  table.deleteRow(lastRowIndex-1);
}



function addAnswerRow(givenTable, givenQuestionNum)
{
  //put answer table into a variable
  var table = document.getElementById(givenTable);
  //put last row index into a varibale
  var lastRowIndex = table.rows.length;


  if(lastRowIndex <= 3)
  {
    //inserts a row onto the table
    var row = table.insertRow(lastRowIndex);

    //first cell is the index for the answer
    var indexCell = row.insertCell(0);
    indexCell.innerHTML = lastRowIndex;
    indexCell.id = "indexAnsQ" + givenQuestionNum + (lastRowIndex);

    //second Cell is just an answer
    var answerCell = row.insertCell(1);
    answerCell.innerHTML = "<input type='text' name='Answer'>";
    answerCell.id = ("ansQ" + givenQuestionNum + (lastRowIndex));

    //third cell is the switch
    var switchCell = row.insertCell(2);
    switchCell.innerHTML = "<input type='checkbox'> ";

    //the last cell is for the descriptions
    var descriptionCell = row.insertCell(3);
    descriptionCell.innerHTML = "<input type='text' name='Description'>";
  }
  else;

} // function addAnswerRow for given table id


//javascript for making an element disappear/appear
function hideORShow(givenId)
{
  var x = document.getElementById(givenId);
  if (x.style.display === "none")
  {
    x.style.display = "block";
  }
  else
  {
    x.style.display = "none";
  }
}
// function to open the creator for each tab
function openCreator(givenQuiz) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(givenQuiz).style.display = "block";
  evt.currentTarget.className += " active";
}

</script>




<!-- tabs for selecting quizzes -->

<div class="tab">
  <button id= "default" class="tablinks" onclick="openCreator('quiz1')">Quiz1</button>
  <button class="tablinks" onclick="openCreator('quiz2')">Quiz2</button>
  <button class="tablinks" onclick="openCreator('quiz3')">Quiz3</button>
</div>

<div id="quiz1" class="tabcontent">
  <h3>QUIZ1</h3>
  <p> Create questions for QUIZ1</p>

  <!-- Quiz maker table -->
  <table id="creatorForQ1" border="1">
    <!-- Labels for quiz master -->
    <tr>
      <th>index</th>
      <th>Question</th>
      <th>Related nodes</th>
      <th>Answers</th>
    </tr>



    <!--
          each question row has unique ids for its elements
          answer id format is made of two numbers:
          index of row and second answer index
    -->

      <!-- Q1 -->
    <tr>
      <td id> 0 </td>
      <td><input type="text" name="Question" id = "q0"></td>
      <td><input type="text" name="Related nodes" id = "rn0"></td>
      <td> <div id ="answersQ0">
             <button onclick="hideORShow('hiddenPartQ0')"> Hide/show answers </button>
              <div id = "hiddenPartQ0">
                <INPUT type="button" value="Add an answer" onclick="addAnswerRow('answersTableQ0')" />
                <INPUT type="button" value="Delete an answer" onclick="deleteQuestionRow('answersTableQ0')" />
                <table id="answersTableQ0" width= "350px" border="1">
                  <TR>
                    <td> 0 </td>
                    <TD> <input type="text" name="Answer" </TD>
                    <td> <input type="checkbox"> </td>
                    <td> <input type="text" name="description" </td>
                  </TR>
                </table>
              </div> <!-- hidden part -->
           </div> <!-- answersQ0 -->
      </td> <!-- the answer column = -->
    </tr>
    <!-- Q2 -->
    <tr>
      <td> 1 </td>
      <td><input type="text" name="Question" id = "q1"></td>
      <td><input type="text" name="Related nodes" id = "rn1"></td>
      <td> <div id ="answersQ1">
             <button onclick="hideORShow('hiddenPartQ1')"> Hide/show answers </button>
              <div id = "hiddenPartQ1">
                <INPUT type="button" value="Add an answer" onclick="addAnswerRow('answersTableQ1')" />
                <INPUT type="button" value="Delete an answer" onclick="deleteQuestionRow('answersTableQ1')" />
                <table id="answersTableQ1" width= "350px" border="1">
                  <TR>
                    <td> 0 </td>
                    <td> <input type="text" name="Answer" id ="ansQ10" </td>
                    <td> <input type="checkbox"> </td>
                    <td> <input type="text" name="description" </td>
                  </TR>
                </table>
              </div> <!-- hidden part -->
           </div> <!-- answersQ0 -->
      </td> <!-- the answer column -->
    </tr>
    <!-- Q3 -->
    <tr>
      <td> 2 </td>
      <td><input type="text" name="Question" id = "q2"></td>
      <td><input type="text" name="Related nodes" id = "rn2"></td>
      <td> <div id ="answersQ2">
             <button onclick="hideORShow('hiddenPartQ2')"> Hide/show answers </button>
              <div id = "hiddenPartQ2">
                <INPUT type="button" value="Add an answer" onclick="addAnswerRow('answersTableQ2')" />
                <INPUT type="button" value="Delete an answer" onclick="deleteQuestionRow('answersTableQ2')" />
                <table id="answersTableQ2" width= "350px" border="1">
                  <TR>
                    <td> 0 </td>
                    <TD> <input type="text" name="Answer" id ="ansQ20" </TD>
                    <td> <input type="checkbox"> </td>
                    <td> <input type="text" name="description" </td>
                  </TR>
                </table>
              </div> <!-- hidden part -->
           </div> <!-- answersQ0 -->
      </td> <!-- answer column -->
    </tr>
    </table>
    <!-- END Quiz maker table -->
    <br>
    <!-- Add/delete quiz buttons -->
    <button onclick="addQuestionRow('creatorForQ1')">Add question
    <button onclick="deleteQuestionRow('creatorForQ1')">Delete question
    <!-- Submit button -->
    <button onclick="">Submit does nothing yet
</div>


<div id="quiz2" class="tabcontent">
  <h3>QUIZ2</h3>
  <p> Create questions for QUIZ2</p>
</div>

<div id="quiz3" class="tabcontent">
  <h3>QUIZ3</h3>
  <p> Create questions for QUIZ3</p>
</div>

<!-- CSS script for the tabs -->
<style>
/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
/* CSS bit for fade-out effect of the tabs */
.tabcontent {
  animation: fadeEffect 1s; /* Fading effect takes 1 second */
}

/* Go from zero to full opacity */
@keyframes fadeEffect {
  from {opacity: 0;}
  to {opacity: 1;}
}


</style>

</body>


</html>
